
#env-canvas {
  position: fixed;
  inset: 0;
  z-index: var(--z-bg);
  pointer-events: none;
}

.grain-overlay {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  opacity: 0.045;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size: 200px 200px;
}

.vignette {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  background: radial-gradient(
    ellipse 80% 80% at 50% 50%,
    transparent 40%,
    rgba(8, 5, 3, 0.55) 75%,
    rgba(4, 2, 1, 0.85) 100%
  );
}

.fire-glow-halo {
  position: fixed;
  bottom: -80px;
  left: 50%;
  transform: translateX(-50%);
  width: 700px;
  height: 350px;
  border-radius: 50%;
  background: radial-gradient(
    ellipse,
    rgba(233,149,102,0.22) 0%,
    rgba(185,89,85,0.10) 40%,
    transparent 70%
  );
  pointer-events: none;
  z-index: 2;
  animation: haloPulse 3s ease-in-out infinite alternate;
}

@keyframes haloPulse {
  0%   { opacity: 0.8; transform: translateX(-50%) scaleX(1); }
  100% { opacity: 1;   transform: translateX(-50%) scaleX(1.08); }
}

.trees-layer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 38vh;
  pointer-events: none;
  z-index: 3;
}

.trees-layer svg {
  width: 100%;
  height: 100%;
  display: block;
}

#ember-canvas {
  position: fixed;
  inset: 0;
  z-index: 4;
  pointer-events: none;
}

.campfire-unit {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index: 5;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Logs */
.fire-logs {
  width: 120px;
  height: 28px;
  position: relative;
  margin-bottom: -6px;
}

.fire-logs svg {
  width: 100%;
  height: 100%;
}

/* Flame system */
.flame-system {
  position: relative;
  width: 100px;
  height: 120px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

.flame {
  position: absolute;
  bottom: 0;
  border-radius: 50% 50% 30% 30% / 60% 60% 40% 40%;
  transform-origin: bottom center;
  mix-blend-mode: screen;
}

.flame-xl {
  width: 70px; height: 110px;
  left: 50%; transform: translateX(-50%);
  background: radial-gradient(ellipse at 50% 85%,
    rgba(255,200,80,0.9) 0%,
    rgba(233,149,102,0.8) 35%,
    rgba(185,89,85,0.5) 65%,
    transparent 100%);
  animation: flameXL 1.1s ease-in-out infinite alternate;
  z-index: 3;
}

.flame-lg {
  width: 55px; height: 90px;
  left: calc(50% - 8px);
  background: radial-gradient(ellipse at 50% 80%,
    rgba(255,220,100,0.85) 0%,
    rgba(217,106,89,0.7) 45%,
    transparent 100%);
  animation: flameLG 0.85s ease-in-out infinite alternate;
  z-index: 2;
}

.flame-left {
  width: 38px; height: 70px;
  left: calc(50% - 26px);
  background: radial-gradient(ellipse at 55% 80%,
    rgba(239,181,118,0.8) 0%,
    rgba(185,89,85,0.5) 55%,
    transparent 100%);
  animation: flameLeft 1.3s ease-in-out infinite alternate;
  z-index: 2;
}

.flame-right {
  width: 38px; height: 70px;
  right: calc(50% - 26px);
  background: radial-gradient(ellipse at 45% 80%,
    rgba(239,181,118,0.8) 0%,
    rgba(185,89,85,0.5) 55%,
    transparent 100%);
  animation: flameRight 1.0s ease-in-out infinite alternate;
  z-index: 2;
}

.flame-core {
  width: 28px; height: 55px;
  left: 50%; transform: translateX(-50%);
  background: radial-gradient(ellipse at 50% 75%,
    rgba(255,248,200,1) 0%,
    rgba(255,210,80,0.9) 30%,
    rgba(239,181,118,0.6) 70%,
    transparent 100%);
  animation: flameCore 0.7s ease-in-out infinite alternate;
  z-index: 4;
}

@keyframes flameXL {
  0%   { transform: translateX(-50%) scaleX(1)    scaleY(1)    rotate(-1deg); }
  33%  { transform: translateX(-50%) scaleX(0.92) scaleY(1.04) rotate(1.5deg); }
  66%  { transform: translateX(-50%) scaleX(1.05) scaleY(0.97) rotate(-0.5deg); }
  100% { transform: translateX(-50%) scaleX(0.96) scaleY(1.06) rotate(2deg); }
}
@keyframes flameLG {
  0%   { transform: scaleX(1)    scaleY(1)    rotate(2deg);  }
  50%  { transform: scaleX(1.08) scaleY(0.94) rotate(-2deg); }
  100% { transform: scaleX(0.93) scaleY(1.07) rotate(1deg);  }
}
@keyframes flameLeft {
  0%   { transform: scaleX(1)    rotate(-3deg); }
  50%  { transform: scaleX(1.1)  rotate(2deg);  }
  100% { transform: scaleX(0.9)  rotate(-4deg); }
}
@keyframes flameRight {
  0%   { transform: scaleX(1)    rotate(3deg);  }
  50%  { transform: scaleX(0.92) rotate(-2deg); }
  100% { transform: scaleX(1.08) rotate(4deg);  }
}
@keyframes flameCore {
  0%   { transform: translateX(-50%) scaleY(1)    opacity 1;    }
  50%  { transform: translateX(-50%) scaleY(1.1)  opacity 0.95; }
  100% { transform: translateX(-50%) scaleY(0.92) opacity 1;    }
}

/* Ground glow */
.fire-ground-glow {
  width: 130px;
  height: 18px;
  border-radius: 50%;
  background: radial-gradient(ellipse,
    rgba(233,149,102,0.6) 0%,
    rgba(185,89,85,0.3) 50%,
    transparent 100%);
  margin-top: -4px;
  animation: groundGlow 1.5s ease-in-out infinite alternate;
}

@keyframes groundGlow {
  0%   { transform: scaleX(1);    opacity: 0.7; }
  100% { transform: scaleX(1.1);  opacity: 1;   }
}